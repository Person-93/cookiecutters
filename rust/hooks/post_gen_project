#!/usr/bin/env bash
set -euo pipefail
shopt -s inherit_errexit

{% if cookiecutter.with_main %}
echo "fn main() {}" > src/main.rs
cat <<EOT >> justfile

# Run the project using cargo
[no-exit-message]
run *args:
  cargo run -- {{args}}
EOT
{% endif %}

cargo generate-lockfile

git init

mkdir .git/info
echo "/tmp.rs" > .git/info/exclude

just setup

git add .
git commit -m "chore: initial commit"

touch local.justfile
